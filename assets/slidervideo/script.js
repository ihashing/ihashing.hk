
(function(){function k(a){return"false"===a?!1:(a=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/))&&/youtu\.?be/g.test(a[3])?"youtube":a&&/vimeo/g.test(a[3])?"vimeo":!1}function l(a){return"false"===a?!1:(a=a.match(/(http:|https:|)\/\/(player.|www.)?(vimeo\.com|youtu(be\.com|\.be|be\.googleapis\.com))\/(video\/|embed\/|watch\?v=|v\/)?([A-Za-z0-9._%-]*)(&\S+)?/))?a[6]:!1}function m(a,e){var f=
new XMLHttpRequest;f.open("GET","https://vimeo.com/api/v2/video/"+a+".json",!0);f.onreadystatechange=function(){if(4===this.readyState&&200<=this.status&&400>this.status){var c=JSON.parse(this.responseText);e(c[0].thumbnail_large)}};f.send();f=null}var h=document.querySelector("html").classList.contains("is-builder"),n=function(a,e){var f,c,g,b;g=window.outerWidth;b=window.outerHeight;var d=a._opts.width/a._opts.height;f=g;c=Math.ceil(f/d);Math.ceil(-((c-b)/2));c<b&&(c=b,f=Math.ceil(c*d),Math.ceil(-((f-
g)/2)));a.setSize(f,c)},p=function(){var a={};return function(e){return new Promise(function(f,c){if(e in a)a[e]?f(a[e]):c("Preview image not found.");else{var g=document.createElement("img");g.addEventListener("load",function(b){b=b.target;if(120===(b.naturalWidth||b.width)){var d=b.src.split("/").pop();switch(d){case "maxresdefault.jpg":b.src=b.src.replace(d,"sddefault.jpg");break;case "sddefault.jpg":b.src=b.src.replace(d,"hqdefault.jpg");break;case "hqdefault.jpg":b.src=b.src.replace(d,"default.jpg");
break;default:a[e]=null,c("Preview image not found.")}}else f(a[e]=b.src)});g.setAttribute("src","https://img.youtube.com/vi/"+e+"/maxresdefault.jpg")}})}}();h||Array.from(document.body.children).filter(function(a){return!a.matches("style, script")}).forEach(function(a){a.addEventListener("add.cards",function(e){if(e.target.classList.contains("carousel")){var f=document.querySelector("html").classList.contains("desktop");e.target.querySelectorAll("[data-bg-video-slide]").forEach(function(c){var a=
l(c.getAttribute("data-bg-video-slide"));if(a){var b=document.createElement("div");b.classList.add("mbr-background-video-preview");b.style.display="none";b.style.backgroundSize="cover";b.style.backgroundPosition="center";c.querySelector(".container-slide").before(b);var d=k(c.getAttribute("data-bg-video-slide")),e=c.querySelectorAll(".mbr-overlay");if("youtube"===d){if(p(a).then(function(a){b.style.backgroundImage='url("'+a+'")';b.style.display="block"}),f&&window.YouTubePlayer&&!c.querySelectorAll(".playerBox").length){d=
document.createElement("div");d.classList.add("mbr-background-video");c.querySelector(".container-slide").before(d);var h={videoURL:a,containment:"self",showControls:!1,mute:!0,modestBranding:!0,autoplay:!0,controls:!1,origin:"*",iv_load_policy:!1,keyboard:!1,captions:!1,annotations:!1,related:!1};d.style.pointerEvents="none";d=new YouTubePlayer(d,h);d.load(a,!0);d.play();d.loadPlaylist();d.setLoop(!0);d.mute();e.length&&c.querySelectorAll(".YTPOverlay").forEach(function(b){b.style.opacity=e.style.opacity;
b.style.backgroundColor=e.style.backgroundColor});n(d);c.querySelectorAll(".image_wrapper img").forEach(function(b){return b.style.opacity=0});c.querySelectorAll(".image_wrapper .mbr-overlay").forEach(function(b){return b.style.opacity=0})}}else m(a,function(a){b.style.backgroundImage='url("'+a+'")';b.style.display="block"}),f&&window.vimeo&&!c.querySelectorAll(".playerBox").length&&(d=document.createElement("div"),d.classList.add("mbr-background-video"),c.querySelector(".container-slide").before(d),
d=new Vimeo.Player("mbr-video-"+i,{id:a,width:"100%",height:"100%",loop:!0}),e.length&&c.querySelectorAll(".vimeo_player_overlay").forEach(function(b){b.style.opacity=e.style.opacity;b.style.backgroundColor=e.style.backgroundColor}))}});e.target.querySelectorAll(".carousel-item iframe").forEach(function(a){a.style.transitionDuration="1000ms";a.style.transitionProperty="opacity"});["slide.bs.carousel","section.carousel"].forEach(function(c){a.addEventListener(c,function(a){a.target.querySelectorAll(".carousel-item.active .mb_YTPlayer").forEach(function(b){b.YTPPause()});
a.target.querySelectorAll(".carousel-item.active .vimeo_player").forEach(function(b){b.v_pause()});a.target.querySelectorAll(".carousel-item:not(.active) iframe").forEach(function(b){b.style.opacity=0})});a.addEventListener(c,function(a){a.target.querySelectorAll(".carousel-item.active .mb_YTPlayer").forEach(function(a){a.YTPPlay()});a.target.querySelectorAll(".carousel-item.active .vimeo_player").forEach(function(a){a.v_play()});a.target.querySelectorAll(".carousel-item.active iframe").forEach(function(a){a.dispatchEvent(new Event("resize"));
a.style.opacity=1})})})}})})})();
